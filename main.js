!function(){"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var t=class{constructor(t,r){e(this,"_showInputError",((e,t)=>{const r=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),r.textContent=t,r.classList.add(this._errorClass)})),e(this,"_hideInputError",(e=>{const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""})),e(this,"_checkInputValidity",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)})),e(this,"_hasInvalidInput",(()=>this._inputList.some((e=>!e.validity.valid)))),e(this,"_toggleButtonState",(()=>{this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=r}_setEventListeners(){this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}};const r={cardTemplateSelector:"#cardTemplate",cardElementListSelector:".cards__list",cardElementSelector:".card",cardNameSelector:".card__name",cardImageSelector:".card__image",cardLikeButtonSelector:".card__like-button",cardLikeButtonClickedSelector:"card__like-button-clicked",cardTrashCanButtonSelector:".card__trashCanButton",cardPopupImageWrapperSelector:"#popupImageWrapper",cardPopupImageSelector:".popup__image",cardPopupTitleSelector:".popup__imageTitle"};var o=class{constructor(e){this.popupElement=document.querySelector(e),this.closeButton=this.popupElement.querySelector(".popup__closeBox"),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupOnRemoteClick=this._closePopupOnRemoteClick.bind(this),this.close=this.close.bind(this)}open(){this.setEventListeners(),this.popupElement.classList.add("popup_opened")}close(){document.removeEventListener("keydown",this._handleEscClose),this.closeButton.removeEventListener("click",this.close),this.popupElement.removeEventListener("click",this._closePopupOnRemoteClick),this.popupElement.classList.remove("popup_opened")}_handleEscClose(e){"Escape"===e.key&&this.close(this.popupElement)}_closePopupOnRemoteClick(e){e.target===e.currentTarget&&this.close(this.popupElement)}setEventListeners(){document.addEventListener("keydown",this._handleEscClose),this.closeButton.addEventListener("click",this.close),this.popupElement.addEventListener("click",this._closePopupOnRemoteClick)}},s=class extends o{constructor(e,t){super(e),this.popupWithFormSubmit=t.bind(this)}getInputValues(){const e=this.popupElement.querySelectorAll(".popup__form-input"),t={};return e.forEach((function(e){t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this.popupElement.addEventListener("submit",this.popupWithFormSubmit)}close(){super.close(),this.popupElement.querySelector("form").reset(),this.popupElement.removeEventListener("submit",this.popupWithFormSubmit)}};const n={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__saveButton",inactiveButtonClass:"popup__saveButton-inactive",inputErrorClass:"popup__form-input-type-error",errorClass:"popup__form-input-error-active",profilePopupSelector:"#profilePopup",newCardPopupSelector:"#newCardPopup",popupImageWrapperSelector:"#popupImageWrapper",authorNameSelector:".author__name",authorDescriptionSelector:".author__description"},i=document.querySelector(".popup__name"),c=document.querySelector(".popup__description"),a=document.querySelector(".author__plus-sign"),l=document.querySelector("#newCardPopup"),p=document.querySelector("#newCardForm"),u=(document.querySelector(".cards__list"),document.querySelector(".author__pencil")),d=document.querySelector("#profileForm"),h=(document.querySelector(".author__name"),document.querySelector(".author__description"),document.querySelector("#profilePopup")),m=(document.querySelector("#popup__newCardTitle"),document.querySelector("#popup__newCardImage"),document.querySelectorAll(".popup__closeBox"),new class extends o{constructor(e){super(e),this.popupWithImage=this.popupElement.querySelector(".popup__image"),this._popupTitleElement=this.popupElement.querySelector(".popup__title")}open(e,t){this.popupWithImage.src=e,this.popupWithImage.alt=t,this._popupTitleElement.textContent=t,super.open()}}(n.popupImageWrapperSelector)),_=new class{constructor(e,t){let{items:r,renderer:o}=e;this._items=r,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:L},r.cardElementListSelector);_.renderItems();const S=new t(n,p),E=new t(n,d),v=new s(n.profilePopupSelector,(function(e){e.preventDefault(),E.resetValidation(),g.setUserInfo(v.getInputValues()),v.close(h)})),C=new s(n.newCardPopupSelector,(function(e){e.preventDefault();const t=L(C.getInputValues());_.addItem(t),C.close(l),S.resetValidation()}));u.addEventListener("click",(function(){!function(e){const t=g.getUserInfo();i.value=t.userName,c.value=t.userDescription,e.resetValidation(),v.open(h)}(E)})),a.addEventListener("click",(function(){C.open(l)}));const g=new class{constructor(e,t){this.nameElement=document.querySelector(e),this.descriptionElement=document.querySelector(t)}getUserInfo(){return{userName:this.nameElement.textContent,userDescription:this.descriptionElement.textContent}}setUserInfo(e){let{name:t,description:r}=e;t&&(this.nameElement.textContent=t),r&&(this.descriptionElement.textContent=r)}}(n.authorNameSelector,n.authorDescriptionSelector);function y(e,t){m.open(e,t)}function L(e){return new class{constructor(e,t,r){this._src=e.link,this._alt=e.name,this._textContent=e.name,this._cardTemplateSelector=t.cardTemplateSelector,this._cardElementSelector=t.cardElementSelector,this._cardNameSelector=t.cardNameSelector,this._cardImageSelector=t.cardImageSelector,this._cardLikeButtonSelector=t.cardLikeButtonSelector,this._cardLikeButtonClickedSelector=t.cardLikeButtonClickedSelector,this._cardTrashCanButtonSelector=t.cardTrashCanButtonSelector,this._openPopup=r,this._cardPopupImageWrapperSelector=t.cardPopupImageWrapperSelector,this._cardPopupImageSelector=t.cardPopupImageSelector,this._cardPopupTitleSelector=t.cardPopupTitleSelector}_getTemplate(){return document.querySelector(this._cardTemplateSelector).content.querySelector(this._cardElementSelector).cloneNode(!0)}_populateCard(){this._cardElement.querySelector(this._cardImageSelector).src=this._src,this._cardElement.querySelector(this._cardImageSelector).alt=this._alt,this._cardElement.querySelector(this._cardNameSelector).textContent=this._textContent}_handleLike(){this._cardElement.querySelector(this._cardLikeButtonSelector).classList.toggle(this._cardLikeButtonClickedSelector)}_handleTrashCan(){this._cardElement.remove()}_addEventListeners(){this._cardElement.querySelector(this._cardLikeButtonSelector).addEventListener("click",(()=>{this._handleLike()})),this._cardElement.querySelector(this._cardTrashCanButtonSelector).addEventListener("click",(()=>{this._handleTrashCan()})),this._cardElement.querySelector(this._cardImageSelector).addEventListener("click",(()=>{this._openPopup(this._src,this._alt)}))}generateCard(){return this._cardElement=this._getTemplate(),this._populateCard(),this._addEventListeners(),this._cardElement}}(e,r,y).generateCard()}S.enableValidation(),E.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQXFCN0UsbUJBQ3JCK0UsRUFBeUIvRSxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZWxlY3RvcnMuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2VsZWN0b3JzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PlxuICAgIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5cbmNvbnN0IGNhcmRTZWxlY3RvcnMgPSB7XG4gIGNhcmRUZW1wbGF0ZVNlbGVjdG9yOiBcIiNjYXJkVGVtcGxhdGVcIixcbiAgY2FyZEVsZW1lbnRMaXN0U2VsZWN0b3I6IFwiLmNhcmRzX19saXN0XCIsXG4gIGNhcmRFbGVtZW50U2VsZWN0b3I6IFwiLmNhcmRcIixcbiAgY2FyZE5hbWVTZWxlY3RvcjogXCIuY2FyZF9fbmFtZVwiLFxuICBjYXJkSW1hZ2VTZWxlY3RvcjogXCIuY2FyZF9faW1hZ2VcIixcbiAgY2FyZExpa2VCdXR0b25TZWxlY3RvcjogXCIuY2FyZF9fbGlrZS1idXR0b25cIixcbiAgY2FyZExpa2VCdXR0b25DbGlja2VkU2VsZWN0b3I6IFwiY2FyZF9fbGlrZS1idXR0b24tY2xpY2tlZFwiLFxuICBjYXJkVHJhc2hDYW5CdXR0b25TZWxlY3RvcjogXCIuY2FyZF9fdHJhc2hDYW5CdXR0b25cIixcbiAgY2FyZFBvcHVwSW1hZ2VXcmFwcGVyU2VsZWN0b3I6IFwiI3BvcHVwSW1hZ2VXcmFwcGVyXCIsXG4gIGNhcmRQb3B1cEltYWdlU2VsZWN0b3I6IFwiLnBvcHVwX19pbWFnZVwiLFxuICBjYXJkUG9wdXBUaXRsZVNlbGVjdG9yOiBcIi5wb3B1cF9faW1hZ2VUaXRsZVwiLFxufTtcblxuZXhwb3J0IHsgY2FyZFNlbGVjdG9ycyB9O1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNzc1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY3NzU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcblxuICAgICAgdGhpcy5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oY2FyZEVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuL0NhcmQuanNcIjtcblxuY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuY2xvc2VCdXR0b24gPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZUJveFwiKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2sgPSB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5jbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSk7XG4gICAgdGhpcy5wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2xpY2tcIixcbiAgICAgIHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrXG4gICAgKTtcbiAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSh0aGlzLnBvcHVwRWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgdGhpcy5jbG9zZSh0aGlzLnBvcHVwRWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICAgIHRoaXMucG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgcG9wdXBXaXRoRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMucG9wdXBXaXRoRm9ybVN1Ym1pdCA9IHBvcHVwV2l0aEZvcm1TdWJtaXQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGdldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0RmllbGRzID1cbiAgICAgIHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taW5wdXRcIik7XG5cbiAgICBjb25zdCBpbnB1dE9iamVjdCA9IHt9O1xuICAgIGlucHV0RmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGN1cnJlbnRJdGVtKSB7XG4gICAgICBpbnB1dE9iamVjdFtjdXJyZW50SXRlbS5uYW1lXSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dE9iamVjdDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnBvcHVwV2l0aEZvcm1TdWJtaXQpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKS5yZXNldCgpO1xuICAgIHRoaXMucG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5wb3B1cFdpdGhGb3JtU3VibWl0KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiY29uc3Qgc2VsZWN0b3JzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWlucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc2F2ZUJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zYXZlQnV0dG9uLWluYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9fZm9ybS1pbnB1dC10eXBlLWVycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Zvcm0taW5wdXQtZXJyb3ItYWN0aXZlXCIsXG4gIHByb2ZpbGVQb3B1cFNlbGVjdG9yOiBcIiNwcm9maWxlUG9wdXBcIixcbiAgbmV3Q2FyZFBvcHVwU2VsZWN0b3I6IFwiI25ld0NhcmRQb3B1cFwiLFxuICBwb3B1cEltYWdlV3JhcHBlclNlbGVjdG9yOiBcIiNwb3B1cEltYWdlV3JhcHBlclwiLFxuICBhdXRob3JOYW1lU2VsZWN0b3I6IFwiLmF1dGhvcl9fbmFtZVwiLFxuICBhdXRob3JEZXNjcmlwdGlvblNlbGVjdG9yOiBcIi5hdXRob3JfX2Rlc2NyaXB0aW9uXCIsXG59O1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuY29uc3QgaW5wdXROYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX25hbWVcIik7XG5jb25zdCBpbnB1dERlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBhZGROZXdDYXJkQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXV0aG9yX19wbHVzLXNpZ25cIik7XG5jb25zdCBuZXdDYXJkUG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXdDYXJkUG9wdXBcIik7XG5jb25zdCBuZXdDYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ld0NhcmRGb3JtXCIpO1xuY29uc3QgY2FyZExpc3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmNvbnN0IHBlbmNpbEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmF1dGhvcl9fcGVuY2lsXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZUZvcm1cIik7XG5jb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmF1dGhvcl9fbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5hdXRob3JfX2Rlc2NyaXB0aW9uXCJcbik7XG5jb25zdCBwcm9maWxlUG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlUG9wdXBcIik7XG5jb25zdCBuZXdDYXJkVGl0bGVJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19uZXdDYXJkVGl0bGVcIik7XG5jb25zdCBuZXdDYXJkSW1hZ2VJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19uZXdDYXJkSW1hZ2VcIik7XG5jb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19jbG9zZUJveFwiKTtcblxuZXhwb3J0IHtcbiAgc2VsZWN0b3JzLFxuICBpbml0aWFsQ2FyZHMsXG4gIGlucHV0TmFtZUVsZW1lbnQsXG4gIGlucHV0RGVzY3JpcHRpb25FbGVtZW50LFxuICBhZGROZXdDYXJkQnV0dG9uRWxlbWVudCxcbiAgbmV3Q2FyZFBvcHVwRWxlbWVudCxcbiAgbmV3Q2FyZEZvcm1FbGVtZW50LFxuICBjYXJkTGlzdEVsZW1lbnQsXG4gIHBlbmNpbEJ1dHRvbkVsZW1lbnQsXG4gIGVkaXRQcm9maWxlRm9ybUVsZW1lbnQsXG4gIHByb2ZpbGVOYW1lRWxlbWVudCxcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudCxcbiAgcHJvZmlsZVBvcHVwRWxlbWVudCxcbiAgbmV3Q2FyZFRpdGxlSW5wdXRFbGVtZW50LFxuICBuZXdDYXJkSW1hZ2VJbnB1dEVsZW1lbnQsXG4gIGNsb3NlQnV0dG9ucyxcbn07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgY2FyZFNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgc2VsZWN0b3JzLFxuICBpbml0aWFsQ2FyZHMsXG4gIGlucHV0TmFtZUVsZW1lbnQsXG4gIGlucHV0RGVzY3JpcHRpb25FbGVtZW50LFxuICBhZGROZXdDYXJkQnV0dG9uRWxlbWVudCxcbiAgbmV3Q2FyZFBvcHVwRWxlbWVudCxcbiAgbmV3Q2FyZEZvcm1FbGVtZW50LFxuICBjYXJkTGlzdEVsZW1lbnQsXG4gIHBlbmNpbEJ1dHRvbkVsZW1lbnQsXG4gIGVkaXRQcm9maWxlRm9ybUVsZW1lbnQsXG4gIHByb2ZpbGVOYW1lRWxlbWVudCxcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudCxcbiAgcHJvZmlsZVBvcHVwRWxlbWVudCxcbiAgbmV3Q2FyZFRpdGxlSW5wdXRFbGVtZW50LFxuICBuZXdDYXJkSW1hZ2VJbnB1dEVsZW1lbnQsXG4gIGNsb3NlQnV0dG9ucyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZUluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICBzZWxlY3RvcnMucG9wdXBJbWFnZVdyYXBwZXJTZWxlY3RvclxuKTtcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IGNyZWF0ZUNhcmQgfSxcbiAgY2FyZFNlbGVjdG9ycy5jYXJkRWxlbWVudExpc3RTZWxlY3RvclxuKTtcbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG5jb25zdCBuZXdDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNlbGVjdG9ycywgbmV3Q2FyZEZvcm1FbGVtZW50KTtcbmNvbnN0IGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBzZWxlY3RvcnMsXG4gIGVkaXRQcm9maWxlRm9ybUVsZW1lbnRcbik7XG5jb25zdCBwcm9maWxlRm9ybUluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHNlbGVjdG9ycy5wcm9maWxlUG9wdXBTZWxlY3RvcixcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcbik7XG5jb25zdCBuZXdDYXJkRm9ybUluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHNlbGVjdG9ycy5uZXdDYXJkUG9wdXBTZWxlY3RvcixcbiAgaGFuZGxlTmV3Q2FyZEZvcm1TdWJtaXRcbik7XG5cbnBlbmNpbEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgb3BlblByb2ZpbGVQb3B1cChlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IpO1xufSk7XG5hZGROZXdDYXJkQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBuZXdDYXJkRm9ybUluc3RhbmNlLm9wZW4obmV3Q2FyZFBvcHVwRWxlbWVudCk7XG59KTtcbmZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cEVsZW1lbnQpIHtcbiAgcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gIHBvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGNsb3NlUG9wdXBPblJlbW90ZUNsaWNrKTtcbn1cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXG4gIHNlbGVjdG9ycy5hdXRob3JOYW1lU2VsZWN0b3IsXG4gIHNlbGVjdG9ycy5hdXRob3JEZXNjcmlwdGlvblNlbGVjdG9yXG4pO1xuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG5cbiAgdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZUZvcm1JbnN0YW5jZS5nZXRJbnB1dFZhbHVlcygpKTtcbiAgcHJvZmlsZUZvcm1JbnN0YW5jZS5jbG9zZShwcm9maWxlUG9wdXBFbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gb3BlblByb2ZpbGVQb3B1cChlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IpIHtcbiAgY29uc3QgdXNlckluZm9ybWF0aW9uID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lRWxlbWVudC52YWx1ZSA9IHVzZXJJbmZvcm1hdGlvbi51c2VyTmFtZTtcbiAgaW5wdXREZXNjcmlwdGlvbkVsZW1lbnQudmFsdWUgPSB1c2VySW5mb3JtYXRpb24udXNlckRlc2NyaXB0aW9uO1xuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVGb3JtSW5zdGFuY2Uub3Blbihwcm9maWxlUG9wdXBFbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGNhcmRJbWFnZVNvdXJjZSwgY2FyZEFsdFNvdXJjZSkge1xuICBwb3B1cFdpdGhJbWFnZUluc3RhbmNlLm9wZW4oY2FyZEltYWdlU291cmNlLCBjYXJkQWx0U291cmNlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChuZXdDYXJkT2JqZWN0KSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChuZXdDYXJkT2JqZWN0LCBjYXJkU2VsZWN0b3JzLCBoYW5kbGVDYXJkQ2xpY2spO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTmV3Q2FyZEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChuZXdDYXJkRm9ybUluc3RhbmNlLmdldElucHV0VmFsdWVzKCkpO1xuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcblxuICBuZXdDYXJkRm9ybUluc3RhbmNlLmNsb3NlKG5ld0NhcmRQb3B1cEVsZW1lbnQpO1xuXG4gIG5ld0NhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufVxuXG5uZXdDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4vQ2FyZC5qc1wiO1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5wb3B1cFdpdGhJbWFnZSA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3BvcHVwVGl0bGVFbGVtZW50ID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fdGl0bGVcIik7XG4gIH1cblxuICBvcGVuKGNhcmRJbWFnZVNvdXJjZSwgY2FyZEFsdFNvdXJjZSkge1xuICAgIHRoaXMucG9wdXBXaXRoSW1hZ2Uuc3JjID0gY2FyZEltYWdlU291cmNlO1xuICAgIHRoaXMucG9wdXBXaXRoSW1hZ2UuYWx0ID0gY2FyZEFsdFNvdXJjZTtcbiAgICB0aGlzLl9wb3B1cFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IGNhcmRBbHRTb3VyY2U7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihhdXRob3JOYW1lU2VsZWN0b3IsIGF1dGhvckRlc2NyaXB0aW9uU2VsZWN0b3IpIHtcbiAgICB0aGlzLm5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdXRob3JOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdXRob3JEZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgdXNlck5hbWU6IHRoaXMubmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICB1c2VyRGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIHVzZXJJbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XG4gICAgaWYgKG5hbWUpIHRoaXMubmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIGlmIChkZXNjcmlwdGlvbikgdGhpcy5kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcbiIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3JzLCBvcGVuUG9wdXApIHtcbiAgICB0aGlzLl9zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3RleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yID0gY2FyZFNlbGVjdG9ycy5jYXJkVGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFNlbGVjdG9yID0gY2FyZFNlbGVjdG9ycy5jYXJkRWxlbWVudFNlbGVjdG9yO1xuICAgIHRoaXMuX2NhcmROYW1lU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3JzLmNhcmROYW1lU2VsZWN0b3I7XG4gICAgdGhpcy5fY2FyZEltYWdlU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3JzLmNhcmRJbWFnZVNlbGVjdG9yO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3JzLmNhcmRMaWtlQnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b25DbGlja2VkU2VsZWN0b3IgPVxuICAgICAgY2FyZFNlbGVjdG9ycy5jYXJkTGlrZUJ1dHRvbkNsaWNrZWRTZWxlY3RvcjtcbiAgICB0aGlzLl9jYXJkVHJhc2hDYW5CdXR0b25TZWxlY3RvciA9IGNhcmRTZWxlY3RvcnMuY2FyZFRyYXNoQ2FuQnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5fb3BlblBvcHVwID0gb3BlblBvcHVwO1xuICAgIHRoaXMuX2NhcmRQb3B1cEltYWdlV3JhcHBlclNlbGVjdG9yID1cbiAgICAgIGNhcmRTZWxlY3RvcnMuY2FyZFBvcHVwSW1hZ2VXcmFwcGVyU2VsZWN0b3I7XG4gICAgdGhpcy5fY2FyZFBvcHVwSW1hZ2VTZWxlY3RvciA9IGNhcmRTZWxlY3RvcnMuY2FyZFBvcHVwSW1hZ2VTZWxlY3RvcjtcbiAgICB0aGlzLl9jYXJkUG9wdXBUaXRsZVNlbGVjdG9yID0gY2FyZFNlbGVjdG9ycy5jYXJkUG9wdXBUaXRsZVNlbGVjdG9yO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGdldENhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkRWxlbWVudFNlbGVjdG9yKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBnZXRDYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9wb3B1bGF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkSW1hZ2VTZWxlY3Rvcikuc3JjID0gdGhpcy5fc3JjO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZEltYWdlU2VsZWN0b3IpLmFsdCA9IHRoaXMuX2FsdDtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmROYW1lU2VsZWN0b3IpLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuX3RleHRDb250ZW50O1xuICB9XG5cbiAgX2hhbmRsZUxpa2UoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRMaWtlQnV0dG9uU2VsZWN0b3IpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLl9jYXJkTGlrZUJ1dHRvbkNsaWNrZWRTZWxlY3Rvcik7XG4gIH1cblxuICBfaGFuZGxlVHJhc2hDYW4oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRMaWtlQnV0dG9uU2VsZWN0b3IpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xuICAgICAgfSk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRUcmFzaENhbkJ1dHRvblNlbGVjdG9yKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2FuKCk7XG4gICAgICB9KTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZEltYWdlU2VsZWN0b3IpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fb3BlblBvcHVwKHRoaXMuX3NyYywgdGhpcy5fYWx0KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIHRoaXMuX3BvcHVsYXRlQ2FyZCgpO1xuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJzZWxlY3RvcnMiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInRoaXMiLCJfZm9ybSIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsIl9lcnJvckNsYXNzIiwicmVtb3ZlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2lucHV0TGlzdCIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJpbnB1dCIsImNhcmRTZWxlY3RvcnMiLCJjYXJkVGVtcGxhdGVTZWxlY3RvciIsImNhcmRFbGVtZW50TGlzdFNlbGVjdG9yIiwiY2FyZEVsZW1lbnRTZWxlY3RvciIsImNhcmROYW1lU2VsZWN0b3IiLCJjYXJkSW1hZ2VTZWxlY3RvciIsImNhcmRMaWtlQnV0dG9uU2VsZWN0b3IiLCJjYXJkTGlrZUJ1dHRvbkNsaWNrZWRTZWxlY3RvciIsImNhcmRUcmFzaENhbkJ1dHRvblNlbGVjdG9yIiwiY2FyZFBvcHVwSW1hZ2VXcmFwcGVyU2VsZWN0b3IiLCJjYXJkUG9wdXBJbWFnZVNlbGVjdG9yIiwiY2FyZFBvcHVwVGl0bGVTZWxlY3RvciIsInBvcHVwU2VsZWN0b3IiLCJwb3B1cEVsZW1lbnQiLCJkb2N1bWVudCIsImNsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayIsImNsb3NlIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwIiwicG9wdXBXaXRoRm9ybVN1Ym1pdCIsInN1cGVyIiwiZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dEZpZWxkcyIsImlucHV0T2JqZWN0IiwiY3VycmVudEl0ZW0iLCJuYW1lIiwidmFsdWUiLCJyZXNldCIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVQb3B1cFNlbGVjdG9yIiwibmV3Q2FyZFBvcHVwU2VsZWN0b3IiLCJwb3B1cEltYWdlV3JhcHBlclNlbGVjdG9yIiwiYXV0aG9yTmFtZVNlbGVjdG9yIiwiYXV0aG9yRGVzY3JpcHRpb25TZWxlY3RvciIsImlucHV0TmFtZUVsZW1lbnQiLCJpbnB1dERlc2NyaXB0aW9uRWxlbWVudCIsImFkZE5ld0NhcmRCdXR0b25FbGVtZW50IiwibmV3Q2FyZFBvcHVwRWxlbWVudCIsIm5ld0NhcmRGb3JtRWxlbWVudCIsInBlbmNpbEJ1dHRvbkVsZW1lbnQiLCJlZGl0UHJvZmlsZUZvcm1FbGVtZW50IiwicHJvZmlsZVBvcHVwRWxlbWVudCIsInBvcHVwV2l0aEltYWdlSW5zdGFuY2UiLCJwb3B1cFdpdGhJbWFnZSIsIl9wb3B1cFRpdGxlRWxlbWVudCIsImNhcmRJbWFnZVNvdXJjZSIsImNhcmRBbHRTb3VyY2UiLCJzcmMiLCJhbHQiLCJjYXJkTGlzdCIsImNzc1NlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJjYXJkRWxlbWVudCIsImFkZEl0ZW0iLCJwcmVwZW5kIiwibGluayIsImNyZWF0ZUNhcmQiLCJuZXdDYXJkRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJwcm9maWxlRm9ybUluc3RhbmNlIiwiUG9wdXBXaXRoRm9ybSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJuZXdDYXJkRm9ybUluc3RhbmNlIiwidXNlckluZm9ybWF0aW9uIiwiZ2V0VXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJEZXNjcmlwdGlvbiIsIm9wZW5Qcm9maWxlUG9wdXAiLCJuYW1lRWxlbWVudCIsImRlc2NyaXB0aW9uRWxlbWVudCIsImRlc2NyaXB0aW9uIiwiaGFuZGxlQ2FyZENsaWNrIiwibmV3Q2FyZE9iamVjdCIsImRhdGEiLCJvcGVuUG9wdXAiLCJfc3JjIiwiX2FsdCIsIl90ZXh0Q29udGVudCIsIl9jYXJkVGVtcGxhdGVTZWxlY3RvciIsIl9jYXJkRWxlbWVudFNlbGVjdG9yIiwiX2NhcmROYW1lU2VsZWN0b3IiLCJfY2FyZEltYWdlU2VsZWN0b3IiLCJfY2FyZExpa2VCdXR0b25TZWxlY3RvciIsIl9jYXJkTGlrZUJ1dHRvbkNsaWNrZWRTZWxlY3RvciIsIl9jYXJkVHJhc2hDYW5CdXR0b25TZWxlY3RvciIsIl9vcGVuUG9wdXAiLCJfY2FyZFBvcHVwSW1hZ2VXcmFwcGVyU2VsZWN0b3IiLCJfY2FyZFBvcHVwSW1hZ2VTZWxlY3RvciIsIl9jYXJkUG9wdXBUaXRsZVNlbGVjdG9yIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9wb3B1bGF0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJfaGFuZGxlTGlrZSIsInRvZ2dsZSIsIl9oYW5kbGVUcmFzaENhbiIsIl9hZGRFdmVudExpc3RlbmVycyIsImdlbmVyYXRlQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=